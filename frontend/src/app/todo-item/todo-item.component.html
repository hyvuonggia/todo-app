<div class="todo-card" [class.completed]="todo.completed" (click)="onCardClick()">
  <div class="todo-header">
    <div class="header-row">
      <mat-checkbox
        [checked]="todo.completed"
        (change)="onCheckboxChange()"
        (click)="$event.stopPropagation()"
        class="todo-checkbox">
      </mat-checkbox>
      <h3 class="todo-title" [class.completed]="todo.completed">{{ todo.title }}</h3>
    </div>
    <div class="category-section" *ngIf="todo.category">
      <span class="category-chip" [style.background-color]="todo.category.color">
        {{ todo.category.name }}
      </span>
    </div>
  </div>

  <div class="todo-body" *ngIf="todo.description">
    <div class="todo-description" [class.completed]="todo.completed" [innerHTML]="todo.description"></div>
  </div>

  <div class="todo-dates" *ngIf="todo.createdAt">
    <div class="date-info">
      <span class="date-label">Created:</span>
      <span class="date-value">{{ formatDate(todo.createdAt) }}</span>
    </div>
    <div class="date-info" *ngIf="todo.lastModified && todo.lastModified !== todo.createdAt">
      <span class="date-label">Modified:</span>
      <span class="date-value">{{ formatDate(todo.lastModified) }}</span>
    </div>
  </div>

  <div class="todo-footer">
    <div class="todo-status">
      <span class="status-indicator" [class.completed]="todo.completed">
        <mat-icon>{{ todo.completed ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
        {{ todo.completed ? 'Completed' : 'Pending' }}
      </span>
    </div>

    <div class="todo-actions">
      <button
        mat-icon-button
        (click)="onDeleteClick(); $event.stopPropagation()"
        class="delete-button"
        aria-label="Delete todo">
        <mat-icon>delete_outline</mat-icon>
      </button>
    </div>
  </div>
</div>
